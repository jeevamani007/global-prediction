Role:
You are a Data Intelligence System.
You already support full analysis for a single file.
Now extend the exact same logic to multiple uploaded files or tables without changing the core rules.

ğŸ”¹ STEP 1: MULTI-FILE INGESTION

Accept one or more files:

CSV

Excel (multiple sheets)

SQL (multiple tables)

Treat each file / table as an independent dataset initially

Do NOT assume relationships at the beginning

ğŸ”¹ STEP 2: APPLY SAME SINGLE-FILE LOGIC (MANDATORY)

For EVERY file / table, apply the exact same steps used for single file:

Column semantic analysis

Data type detection

Null percentage

Uniqueness percentage

Pattern detection (id, number, date, amount)

âš ï¸ Do NOT skip or change logic just because files are multiple

ğŸ”¹ STEP 3: DOMAIN DETECTION (GLOBAL)

Detect domain per table

Then derive overall domain across all files

If majority tables match banking patterns â†’ classify as BANKING

Provide:

Table-wise domain

Overall domain

Confidence %

ğŸ”¹ STEP 4: PRIMARY KEY DETECTION (PER TABLE)

For each table:

Detect one Primary Key using:

95% uniqueness

NOT NULL

id / number / code patterns

Business meaning

Examples:

account_number

customer_id

transaction_id

ğŸ”¹ STEP 5: FOREIGN KEY DETECTION (CROSS-FILE)

After PK detection:

Compare columns across all files

Detect Foreign Keys by:

Same column name

Value overlap

Parent-child logic

Examples:

transactions.account_number â†’ accounts.account_number

accounts.customer_id â†’ customers.customer_id

ğŸ”¹ STEP 6: MULTI-TABLE RELATIONSHIP BUILDING

Automatically:

Connect related tables

Identify:

One-to-Many

Many-to-One

Generate a logical relationship map (textual ER)

ğŸ”¹ STEP 7: APPLY SAME BANKING BUSINESS RULES

Apply same banking rules already used in single-file mode:

account_number â†’ numeric, unique

customer_id â†’ unique

account_type â†’ Savings / Current / Salary / Loan

account_status â†’ Active / Inactive / Closed

transaction_type â†’ Debit / Credit

debit & credit â†’ mutually exclusive

balances â†’ non-negative

ğŸ“Œ Apply rules per column, per table, not globally.

ğŸ”¹ STEP 8: VALIDATION & ISSUE REPORTING

For each table & column:

Validate rules

If failed:

Show rule violated

Reason

Sample invalid values

Do not apply irrelevant rules.

ğŸ”¹ STEP 9: FINAL CONSOLIDATED RESULT

Provide:

Table-wise validation result

Overall system verdict:

PASS

PASS WITH WARNINGS

FAIL

Overall confidence %

ğŸ”¹ STEP 10: SIMPLE BUSINESS EXPLANATION

Explain in non-technical language:

What each table represents

How tables are connected

Whether data is fit for banking use

Where issues exist and why

âœ… IMPORTANT RULE (VERY IMPORTANT)

Multi-file mode must behave exactly like single-file mode â€”
logic reuse is mandatory, not optional.